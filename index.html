<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epic Converter LUAN ‚ö°</title>
    <style>
        :root { --primary: #ffd700; --bg: #1a1a2e; --card: rgba(255,255,255,0.08); --success: #4ecca3; }
        * { margin:0; padding:0; box-sizing:border-box; font-family: sans-serif; }
        body { background: var(--bg); color: #fff; padding: 15px; }
        .header { text-align: center; margin-bottom: 20px; }
        h1 { color: var(--primary); font-size: 1.5rem; }
        .glass { background: var(--card); border-radius: 15px; padding: 15px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .rate-card { background: rgba(0,0,0,0.2); padding: 12px; border-radius: 12px; text-align: center; cursor: pointer; border: 2px solid transparent; }
        .rate-card.selected { border-color: var(--primary); background: rgba(255, 215, 0, 0.1); }
        .val { font-size: 1.2rem; font-weight: bold; color: var(--success); display: block; }
        .label { font-size: 0.7rem; color: #aaa; }
        label { font-size: 0.75rem; color: #ccc; display: block; margin-top: 10px; }
        .input-group { display: flex; gap: 8px; align-items: center; margin: 8px 0; }
        input { flex: 1; padding: 14px; border-radius: 10px; border: 1px solid #444; background: #252945; color: #fff; font-size: 1.1rem; outline: none; }
        .clear-btn { background: #ff4d4d; color: white; border: none; padding: 14px; border-radius: 10px; font-weight: bold; height: 52px; }
        .toggle-container { display:flex; gap:8px; margin: 10px 0; }
        .toggle-btn { flex:1; padding:12px; border-radius:8px; border:none; background: #333; color: #fff; font-weight: bold; }
        .active { background: var(--primary) !important; color: #1a1a2e !important; }
        .res-box { background: rgba(78, 204, 163, 0.1); padding: 20px; border-radius: 12px; margin-top: 15px; text-align: center; border: 1px dashed var(--success); }
        .btn-wa { background: #25D366; color: #fff; border: none; width: 100%; padding: 16px; border-radius: 10px; font-weight: bold; margin-top: 15px; }
    </style>
</head>
<body>
<div class="header">
    <h1>Epic Converter ‚ö°</h1>
    <p style="font-size: 0.7rem; opacity: 0.5;">LUANSystem‚Ñ¢ Professional</p>
</div>
<div class="glass">
    <div class="grid">
        <div class="rate-card" id="card-BCV" onclick="selectRate('BCV')"><span class="label">BCV</span><span class="val" id="vBCV">0.00</span></div>
        <div class="rate-card" id="card-BIN" onclick="selectRate('BIN')"><span class="label">Binance</span><span class="val" id="vBIN">0.00</span></div>
        <div class="rate-card" id="card-PAR" onclick="selectRate('PAR')"><span class="label">Paralelo</span><span class="val" id="vPAR">0.00</span></div>
        <div class="rate-card" id="card-EUR" onclick="selectRate('EUR')"><span class="label">Euro</span><span class="val" id="vEUR">0.00</span></div>
    </div>
</div>
<div class="glass">
    <div class="toggle-container">
        <button id="btnV" class="toggle-btn active" onclick="setMode('V')">Vendo USD</button>
        <button id="btnC" class="toggle-btn" onclick="setMode('C')">Compro USD</button>
    </div>
    <label id="labelMonto">MONTO EN D√ìLARES ($)</label>
    <div class="input-group">
        <input type="number" id="monto" placeholder="0.00" inputmode="decimal" oninput="calc()">
        <button class="clear-btn" onclick="document.getElementById('monto').value='';calc()">üóëÔ∏è</button>
    </div>
    <label id="labelTasa">TASA DE CAMBIO</label>
    <input type="number" id="tasa" step="0.01" inputmode="decimal" oninput="calc()">
    <div id="resBox" class="res-box" style="display:none;">
        <p id="resLabel" style="font-size: 0.8rem; color: #aaa;">Total a recibir:</p>
        <h2 id="resTotal" style="color: var(--success); font-size: 2rem;">Bs 0.00</h2>
    </div>
    <button class="btn-wa" onclick="sendWA()">Compartir por WhatsApp</button>
</div>
<script>
let rates={BCV:0,PAR:0,BIN:0,EUR:0}, mode='V', selectedSource='BIN';
async function loadData(){
    try {
        const r = await fetch('https://ve.dolarapi.com/v1/dolares').then(res=>res.json());
        rates.BCV = r.find(d=>d.fuente==='oficial').promedio;
        rates.PAR = r.find(d=>d.fuente==='paralelo').promedio;
        rates.EUR = rates.BCV * 1.08;
        rates.BIN = rates.PAR + 0.10;
        document.getElementById('vBCV').innerText = rates.BCV.toFixed(2);
        document.getElementById('vBIN').innerText = rates.BIN.toFixed(2);
        document.getElementById('vPAR').innerText = rates.PAR.toFixed(2);
        document.getElementById('vEUR').innerText = rates.EUR.toFixed(2);
        selectRate('BIN');
    } catch(e) { console.error(e); }
}
function selectRate(s){
    selectedSource = s;
    document.querySelectorAll('.rate-card').forEach(c=>c.classList.remove('selected'));
    document.getElementById('card-'+s).classList.add('selected');
    document.getElementById('tasa').value = rates[s].toFixed(2);
    let moneda = (s === 'EUR') ? 'EUR' : (s === 'BIN') ? 'BIN' : 'USD';
    document.getElementById('labelMonto').innerText = `MONTO EN ${moneda} (${s === 'EUR' ? '‚Ç¨' : '$'})`;
    setMode(mode);
}
function setMode(m){
    mode = m;
    let moneda = (selectedSource === 'EUR') ? 'EUR' : (selectedSource === 'BIN') ? 'BIN' : 'USD';
    document.getElementById('btnV').innerText = `Vendo ${moneda}`;
    document.getElementById('btnC').innerText = `Compro ${moneda}`;
    document.getElementById('btnV').classList.toggle('active', m === 'V');
    document.getElementById('btnC').classList.toggle('active', m === 'C');
    document.getElementById('resLabel').innerText = m === 'V' ? 'Total a recibir:' : 'Total a pagar:';
    calc();
}
function calc(){
    const m = +document.getElementById('monto').value || 0;
    const t = +document.getElementById('tasa').value || 0;
    const res = document.getElementById('resBox');
    if(m && t){
        res.style.display = 'block';
        document.getElementById('resTotal').innerText = "Bs " + (m*t).toLocaleString('es-VE',{minimumFractionDigits:2});
    } else { res.style.display = 'none'; }
}
function sendWA(){
    const m = document.getElementById('monto').value;
    const t = document.getElementById('tasa').value;
    const mon = (selectedSource === 'EUR') ? 'Euros' : 'D√≥lares';
    const txt = `‚ö° *Epic Converter*\n*Operaci√≥n:* ${mode==='V'?'Venta':'Compra'} de ${mon}\n*Monto:* ${m}\n*Tasa:* ${t} Bs\n*Total:* ${document.getElementById('resTotal').innerText}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(txt)}`);
}
loadData();
</script>
</body>
</html>
